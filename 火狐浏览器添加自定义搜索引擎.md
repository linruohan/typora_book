# 火狐浏览器添加自定义搜索引擎并屏蔽特定网站

记录一下火狐浏览器(Firefox)添加自定义搜索引擎，并屏蔽特定网站的两种操作（注：本文用`XXXX`代替真实网站）。
搜索引擎搜索时，有很多重复且无用的结果，部分有用的信息也需要登录关注才能看。这些内容大部分源于某些个网站，占据了大部分搜索结果，使得检索效率大大下降。所以个人需要对特定网站进行屏蔽。
但火狐浏览器的`设置-搜索`界面里并没有添加自定义搜索引擎的功能，只能通过安装插件的方式来添加。以前在旧电脑上配置过火狐的自定义快捷搜索，但是忘记具体的操作步骤了。所以重新查阅了很多资料，并记录一下。

---


# 方法一：高级首选项启用添加按钮

参考链接：[Set up custom default search URL](https://support.mozilla.org/en-US/questions/1365694)

这是Mozilla社区的一个提问，里面提到了一个实验性功能。回答者就在二楼，其内容翻译如下：

> jscher2000 - 支持志愿者|顶级贡献者 1/24/22, 5:02 PM  
> 我测试了创建一个Startpage "cookieless"设置主页的URL。当我进行搜索时，我得到了这个结果页面URL（你的URL会有所> 不同）：
> 
> （……一串链接……）
> 
> 你可以使用这个结果页面URL来设置一个自定义搜索引擎，通过一个隐藏的设置。我认为它是隐藏的，因为它还没有完成，但我认> 为它很安全，可以进行实验。以下是如何操作：
> 
> (1) 在新标签页中，在地址栏中输入或粘贴about:config并按Enter/Return键。点击接受风险的按钮。
> 
> 关于about:config的更多信息：Firefox的配置编辑器。由于管理员希望我们提醒您，通过这个后门所做的更改不受完全支> 持，并且不能保证在未来继续正常工作。由于我自己也使用它，所以我觉得很放心地提到它。
> 
> (2) 在该页面的搜索框中，输入或粘贴browser.urlbar.update2.engineAliasRefresh并暂停，等待列表过滤。
> 
> Firefox应该显示一个带有布尔值、数字、字符串和加号按钮的栏。
> 
> (3) 保持选择布尔值，并点击加号按钮。如果值没有自动设置为true，请双击false以切换为true。
> 
> (4) 打开设置页面，搜索面板，向下滚动到搜索快捷方式部分。在框下方，你应该找到一个新添加按钮。点击添加以打开表单，> 然后使用你选择的名称、结果页面URL和关键词（如果有的话）来设置你的新引擎。结果页面URL需要进行编辑：将结果页面中的> 搜索词替换为占位符%s，这样Firefox就知道在哪里填写查询文本以提交搜索。
> 
> 注意：无法编辑此新搜索引擎，因此如果它不起作用，你需要删除它并创建一个新的。
> 
> 你觉得怎么样？

这个方法虽然是实验性功能，但是是我比较喜欢的方法。回答者提到他认为该设置是安全的，我也用了很久，我也认为是安全的

## 1 1.进入高级首选项开启添加功能

新建标签页，在地址栏输入`about:config`并回车，然后点击接受风险按钮：
在搜索栏中输入`browser.urlbar.update2.engineAliasRefresh=true`，然后会显示一个可配置的参数如下。

```bash
about:config

browser.urlbar.update2.engineAliasRefresh                true
```
![image](https://img2023.cnblogs.com/blog/2304927/202310/2304927-20231019200952381-462448397.png)
选择布尔值并点击右边的添加按钮，然后确保它的值是True：

## 2 2.添加自定义搜索引擎

然后点击浏览器右上角菜单进入`设置-搜索`，可以看到快捷搜索右下角出现了`添加(A)`按钮

![image](https://img2023.cnblogs.com/blog/2304927/202310/2304927-20231019202035915-1596096633.png)

点击添加按钮，按如下配置：
```bash
// 无追搜索
https://www.wuzhuiso.com/s?src=opensearch&q=%s&adv_t=y
// bing搜索
https://www.bing.com/search?q=%s&PC=U316&FORM=CHROMN
```

点击`添加搜索引擎(A)`按钮就完成了

## 3 3.URL写法

1. `https://bing.com/search?q=`可以换成你需要的其他搜索引擎地址
2. `%s`在搜索时会被替换为关键词
3. `-site:`是Bing（国内版）的屏蔽代码，`%3A`其实就是`:`。如果使用其他搜索引擎可能需要修改
4. `xxxx.net`是要屏蔽的网站地址，根据需要填写

URL举例：  
百度搜索屏蔽`XXXX`关键词，URL就是`https://www.baidu.com/s?wd=%s-XXXX`  
百度屏蔽 `xxxx.net` 网站，URL 就是 `https://www.baidu.com/s?wd=%s-site%3Axxxx.net`
# 方法2：插件添加搜索引擎

## 1 1.搜索并安装插件

点击浏览器右上角插件图标`管理扩展`  
进入页面并在右上角搜索`Add custom search engine`，找到插件并安装

![image](https://img2023.cnblogs.com/blog/2304927/202310/2304927-20231019201038877-839409710.png)

## 2 2.添加搜索引擎

点击浏览器右上角插件图标

![image](https://img2023.cnblogs.com/blog/2304927/202310/2304927-20231019201056792-2022607993.png)

点击`Add custom search engine`插件，进入插件页面

![image](https://img2023.cnblogs.com/blog/2304927/202310/2304927-20231019202425241-1612915770.png)

URL的内容参考方法一的第3点：  
[3.URL写法](https://www.cnblogs.com/tamapchn/p/17775519.html#1.3)

填写完后点击`Add custom search engine`按钮，然后在地址栏右键添加

![image](https://img2023.cnblogs.com/blog/2304927/202310/2304927-20231019202458872-507209404.png)

# 选择默认搜索引擎

最后，在`设置-搜索`页面，选择你添加的搜索引擎就行了，可以看到这里用上述两个方法添加了两个新选项，效果是一样的。

![image](https://img2023.cnblogs.com/blog/2304927/202310/2304927-20231019201119105-668703850.png)