# 位操作

[toc]

## 一个字节的尺寸

C语言并没有规定一个自己的尺寸

可寻址的数据存储单位,其尺寸必须可以容纳运行环境的基本字符集的任何成员


## limits.h

![image-20210410112659393](imgs/image-20210410112659393.png)

![image-20210410112724423](imgs/image-20210410112724423.png)

## 逻辑位运算符(每个二进制位进行操作)

![image-20210410112914431](imgs/image-20210410112914431.png)

### 按位取反(~)–将1变为0,将0变为1

逻辑位运算符中优先级最高的

<img src="imgs/image-20210410113126024.png" alt="image-20210410113126024" style="zoom: 50%;" />

### 按位与(&)– 同时为1才为1,否则为0

<img src="imgs/image-20210410113239288.png" alt="image-20210410113239288" style="zoom:50%;" />

### 按位异或(^)– 两操作数对应的二进制位不同时为1,否则为0

<img src="imgs/image-20210410113443611.png" alt="image-20210410113443611" style="zoom:50%;" />

### 按位或(|) – 其中1个为1结果为1,否则为0

<img src="imgs/image-20210410113550141.png" alt="image-20210410113550141" style="zoom: 50%;" />

## 和赋值号结合

这四个运算符,除了按位取反只有一个操作数之外,其他三个都可以跟赋值号(=)结合到一起,使代码更简洁.

<img src="imgs/image-20210410113743933.png" alt="image-20210410113743933" style="zoom:50%;" />

![image-20210410113801403](imgs/image-20210410113801403.png)

# 位运算

## 移位运算符

移位运算符:将某个变量中所有的二进制位进行左移或右移的运算符

### 左移位运算符(乘以2的n次幂)

```c
11001010 << 2
```

<img src="imgs/image-20210410114027556.png" alt="image-20210410114027556" style="zoom:33%;" />

### 右移位运算符(除以2的n次幂)

<img src="imgs/image-20210410114115083.png" alt="image-20210410114115083" style="zoom:33%;" />

### 和赋值号结合

![image-20210410114341491](imgs/image-20210410114341491.png)

![image-20210410114359218](imgs/image-20210410114359218.png)

## 一些未定义行为

1. 左移和右移运算符==右边的操作数如果为负数==,或者==右边的操作数大于左边操作数支持的最大宽度==,那个表达式的结果均属于“未定义行为”.

2. 左边的操作数是有符号还是无符号数,其实也对移位运算符有着不同的影响,无符号数肯定没问题,因为这时候变量里边的所有位都用于表示该数值的大小;但有符号数,区别对待,因为有符号数的左边第一位是符号位,如果恰好这个操作数是个负数,那个移动之后是否符号符号位决定权,还是落到了编译器上.

## 应用

![image-20210410115034358](imgs/image-20210410115034358.png)

### 判断那个是开的(&)

<img src="imgs/image-20210410115153288.png" alt="image-20210410115153288" style="zoom:50%;" />

<img src="imgs/image-20210410115207192.png" alt="image-20210410115207192" style="zoom: 50%;" />

### 打开位(0->1只开主卧)

<img src="imgs/image-20210410115254458.png" alt="image-20210410115254458" style="zoom:50%;" />

## 关闭位(1->0关闭客厅)

![image-20210410115331241](imgs/image-20210410115331241.png)

## 转置位(0->1,1->0关掉客厅,打开主卧)

![image-20210410115432649](imgs/image-20210410115432649.png)

## 利用xor进行简单高效的加密

![image-20210410115815551](imgs/image-20210410115815551.png)