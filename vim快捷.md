# vim基本命令之剪切复制粘贴替换

## ==剪切==（删除）: d

剪切其实也就顺带删除了所选择的内容，所以既可以当剪切命令用，也可以当删除命令使用。

1.  首先，可以在命令模式下输入v进入自由选取模式，选择需要剪切的文字后，按下d就可以进行剪切了。
2.  其他命令模式下剪切命令:
3. dd:剪切当前行
4. ndd:n表示大于1的数字，剪切n行
5. dw:从光标处剪切至一个单子/单词的末尾，包括空格
6. de:从光标处剪切至一个单子/单词的末尾，不包括空格
7. d$:从当前光标剪切到行末
8. d0:从当前光标位置（不包括光标位置）剪切之行首
9. d3l:从光标位置（包括光标位置）向右剪切3个字符
10. d5G:将当前行（包括当前行）至第5行（不包括它）剪切
11. d3B:从当前光标位置（不包括光标位置）反向剪切3个单词
12. dH:剪切从当前行至所显示屏幕顶行的全部行
13. dM:剪切从当前行至命令M所指定行的全部行
14. dL:剪切从当前行至所显示屏幕底的全部行

自己实践时，还发现，==单独按d键，是剪切2行==，

==按下nd，是剪切n+1行==，不过一般使用还是推荐使用双d（即dd）来执行。

对于==复制命令，和剪切命令大体相似，就是把相应的d换成y==即可:


```shell
## 首先，可以在命令模式下输入v进入自由选取模式，选择需要剪切的文字后，按下y就可以进行剪切了。
## 其他命令模式下剪切命令:
yy:复制当前行
nyy:n表示大于1的数字，复制n行
yw:从光标处复制至一个单子/单词的末尾，包括空格
ye:从光标处复制至一个单子/单词的末尾，不包括空格
y$:从当前光标复制到行末
y0:从当前光标位置（不包括光标位置）复制之行首
y3l:从光标位置（包括光标位置）向右复制3个字符
y5G:将当前行（包括当前行）至第5行（不包括它）复制
y3B:从当前光标位置（不包括光标位置）反向复制3个单词
```

## 复制:单独按y是复制2行，ny是复制n+1行

## 粘贴: 命令最简单，在需要粘贴的光标处按下p即可。

## s替换字符串

vi/vim 中可以使用 :==s 命令来替换字符串==。该命令有很多种不同细节使用方法，可以实现复杂的功能，记录几种在此，方便以后查询。 
```shell
:s/vivian/sky/ 替换当前行第一个 vivian 为 sky 
:s/vivian/sky/g 替换当前行所有 vivian 为 sky 
```
## n指定行

```shell
:n，s/vivian/sky/替换第n行开始到最后一行中每一行的第一个vivian为sky　　　
:n，s/vivian/sky/g 替换第 n 行开始到最后一行中每一行所有 vivian 为 sky 
## n 为数字，若 n 为 .，表示从当前行开始到最后一行 
　　:%s/vivian/sky/（等同于 :g/vivian/s//sky/） 替换每一行的第一个vivian为sky 
　　:%s/vivian/sky/g（等同于 :g/vivian/s//sky/g） 替换每一行中所有 vivian 为 sky 
```
## 分割符

###　1: # 作为分隔符，此时中间出现的 / 不会作为分隔符

　　`:s#vivian/#sky/# ` 替换当前行第一个 vivian/ 为 sky/ 
###    2: + 作为分隔符

　　`:%s+/oradata/apras/+/user01/apras1+ `/oradata/apras/替换成/user01/apras1/ 

## 案例

```shell
##   g为所有
1.  :s/vivian/sky/ 		替换当前行第一个 vivian 为 sky
2.　:s/vivian/sky/g 		替换当前行所有 vivian 为 sky 
##　　（n 为数字，若 n 为 .，表示从当前行开始到最后一行）  
3.  :n，s/vivian/sky/		替换第n行开始到最后一行中每一行的第一个vivian为sky　　　
4.  :n，s/vivian/sky/g 		替换第 n 行开始到最后一行中每一行所有 vivian 为 sky
##   % 占位符代表所有
5.  :%s/vivian/sky/		（等同于 :g/vivian/s//sky/） 替换每一行的第一个 vivian 为 sky 
6.  :%s/vivian/sky/g		（等同于 :g/vivian/s//sky/g） 替换每一行中所有 vivian 为 sky 
　 
## 可以使用 # 作为分隔符，此时中间出现的 / 不会作为分隔符 
7.　:s#vivian/#sky/# 	替换当前行第一个 vivian/ 为 sky/ 
```
##　　window文件 ==> linux文件:   删除多余的^M 

　　问题描述:对于换行，window下用回车换行（0A0D）来表示，linux下是回车（0A）来表示。这样，将window上的文件拷到unix上用时，总会有个^M.请写个用在unix下的过滤windows文件的换行符（0D）的shell或c程序。 

1. 使用命令:cat filename1 | tr -d “^V^M” > newfile； 
2. 使用命令:sed -e “s/^V^M//” filename > outputfilename.需要注意的是在1、2两种方法中，^V和^M指的是Ctrl+V和Ctrl+M.你必须要手工进行输入，而不是粘贴。 
3. 在vi中处理:首先使用vi打开文件，然后按ESC键，接着输入命令:%s/^V^M// :%s/^M$//g 
4. 如果上述方法无用，则正确的解决办法是:

tr -d \"\\r\" < src > dest 

tr -d \"\\015\" dest

strings A>B

###   6. 替换确认

我们有很多时候会需要某个字符(串)在文章中某些位置出现时被替换，而其它位置不被替换的有选择的操作，这就需要用户来进行确认，

vi的查找替换同样支持`
:s/vivian/sky/g `替换当前行所有 vivian 为 sky 
      

在命令后面加上一个字母c就可以实现，即`:s/vivian/sky/gc`
     顾名思意，c是confirm的缩写

###　　7. 其它

　　==利用 :s 命令可以实现字符串的替换。具体的用法包括:== 
  1. 　　:s/str1/str2/ 用字符串 str2 替换行中首次出现的字符串 str1 
  2. 　　:s/str1/str2/g 用字符串 str2 替换行中所有出现的字符串 str1 
  3. 　　:，s/str1/str2/g用字符串str2替换正文当前行到末尾所有出现的字符串str1　　　
  4. 　　:1， s/str1/str2/g 用字符串 str2 替换正文中所有出现的字符串 str1 
  5. 　　:g/str1/s//str2/g 功能同上 

　　==从上述替换命令可以看到:==
　　1. g 放在命令末尾，表示对搜索字符串的每次出现进行替换；
　　2. 不加 g，表示只对搜索字符串的首次出现进行替换；
　　3. g 放在命令开头，表示对正文中所有包含搜索字符串的行进行替换操作
